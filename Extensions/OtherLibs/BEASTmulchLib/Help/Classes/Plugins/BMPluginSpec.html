<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="949.54">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #001bec}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p7 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p8 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica}
p.p9 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p10 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica}
p.p11 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p12 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Helvetica}
p.p13 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; color: #0000bf}
p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #bf0000}
p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #007300}
p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #0000bf}
span.s1 {font: 18.0px Helvetica}
span.s2 {color: #0043f5}
span.s3 {color: #003cf7}
span.s4 {color: #0000bf}
span.s5 {color: #000000}
span.s6 {text-decoration: underline}
span.s7 {color: #0034f9}
span.s8 {font: 12.0px Helvetica; color: #000000}
span.s9 {color: #007300}
span.s10 {color: #bf0000}
span.s11 {color: #606060}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><span class="s1"><b>BMPluginSpec<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></span><b>a specification for creating a BMPlugin</b></p>
<p class="p2"><br></p>
<p class="p1"><b>Inherits from: </b><a href="SC://Object"><span class="s2"><b>Object</b></span></a></p>
<p class="p3"><br></p>
<p class="p1">Instances of <a href="BMPluginSpec.html"><span class="s2">BMPluginSpec</span></a> serve as templates for creating a <a href="BMPlugin.html"><span class="s3">BMPlugin</span></a> of a particular type, e.g. a high pass filter, a reverb, a 3 band EQ, etc. They provide functions for such things as <a href="SC://SynthDef"><span class="s2">SynthDef</span></a> and GUI creation, include standard presets, etc. Plugin specs allow for user customisation at plugin creation time through the use of <i>attributes</i> (see below).</p>
<p class="p2"><br></p>
<p class="p1">Specs are stored in a global dictionary held in the class variable <b>*specs</b>. You can see a list of all available specs as follows:</p>
<p class="p2"><br></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s4">BMPluginSpec</span>.specs.keys;</p>
<p class="p2"><br></p>
<p class="p5"><span class="s5"><b>See also:</b> <a href="BMPlugin.html"><span class="s6">BMPlugin</span></a>, <a href="BMTrimPluginsRack.html"><span class="s6">BMTrimPluginsRack</span></a>, <a href="BMMultichannelPluginSpec.html"><span class="s6">BMMultichannelPluginSpec</span></a>, <a href="../Inputs and Outputs/BMSpeakerSpec.html"><span class="s6">BMSpeakerSpec</span></a></span></p>
<p class="p2"><br></p>
<p class="p6"><b>BMPlugin vs. BMMultichannelPlugin</b></p>
<p class="p2"><br></p>
<p class="p1">BMPlugin is monophonic, i.e. it has a single input and output, which are in fact the same bus. BMMultichannelPlugins can have variable numbers of inputs and outputs, which need not match. The exact number and configuration of inputs and outputs expected varies according to the multichannel plugin's spec.</p>
<p class="p2"><br></p>
<p class="p6"><b>Creation / Class Methods</b></p>
<p class="p7"><br></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>*new (name, ugenGraphFunc, specsDict, guiFunc, presets, description, defaultAttributes, setupFunc, cleanupFunc)</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Create a new BMPluginSpec and add it to <b>*specs</b>. If a spec with this <b>name</b> already exists it will be replaced.</p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>name </b>- A <a href="SC://Symbol"><span class="s2">Symbol</span></a> indicating the name of this plugin spec, e.g. 'Hipass' or 'Freeverb'.</p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>ugenGraphFunc </b>- A <a href="SC://Function"><span class="s2">Function</span></a> detailing this spec's processing chain. When a plugin is created this will be passed the BMPlugin instance and the input signal as its first two arguments. Additional arguments will result in instances of <a href="SC://Control"><span class="s2">Control</span></a> being created.</p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>specsDict </b>- A <a href="SC://Dictionary"><span class="s2">Dictionary</span></a> or subclass matching <a href="SC://Control"><span class="s2">Control</span></a> names as keys with instances of <a href="SC://ControlSpec"><span class="s2">ControlSpec</span></a>. Plugin instances make a copy of this which can be modified when <b>setupFunc (</b>see below) is called. These will be used in GUI construction.</p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>guiFunc </b>- An optional <a href="SC://Function"><span class="s2">Function</span></a> which will be used to create GUIs for plugin instances using this spec. This Function will be passed the plugin instance as an argument, and should return the GUI's window. If nil is passed here, a default GUI Function will be used.</p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>presets </b>- An optional <a href="SC://Dictionary"><span class="s2">Dictionary</span></a> or subclass providing parameter presets. Keys are Symbols indicating preset names, values are Dictionaries or subclasses matching Control names to values.</p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>description </b>- A <a href="SC://String"><span class="s2">String</span></a> to serve as a human readable description of this spec.</p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>defaultAttributes </b>- Plugin specs can optionally provide a set of overridable attributes which can serve as settings or inputs to their <b>ugenGraphFunc</b>, <b>guiFunc</b>, <b>setupFunc</b>, and <b>cleanupFunc</b>. This should be a <a href="SC://Dictionary"><span class="s2">Dictionary</span></a> or subclass containing key value pairs. Users can override these defaults by passing a Dictionary or subclass as the <b>attributes </b>argument to <b>BMPlugin:new</b>.<span class="Apple-converted-space"> </span></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>setupFunc </b>- An optional <a href="SC://Function"><span class="s2">Function</span></a> that will be evaluated when a plugin instance is made, and before <b>ugenGraphFunc</b> is evaluated. It will be passed the plugin instance as an argument. It can store any objects created in <b>attributes</b> for use by the <b>ugenGraphFunc</b>, <b>guiFunc</b>, or <b>cleanUpFunc</b>. It can also do things like modify the plugin's local copy of the <b>specsDict</b>.</p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>cleanupFunc </b>- An optional <a href="SC://Function"><span class="s2">Function</span></a> that will be evaluated when a plugin instance is released. It will be passed the plugin instance as an argument.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><br></p>
<p class="p12"><b>Accessing Instance and Class Variables</b></p>
<p class="p9"><span class="Apple-tab-span">	</span></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>*specs</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Returns an <a href="SC://IdentityDictionary"><span class="s7">IdentityDictionary</span></a> containing all currently existing specs. This uses the names of specs as Symbols for keys.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="s8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>BMPluginSpec<span class="s5">.specs[</span><span class="s9">'Highpass'</span><span class="s5">];</span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>description</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Returns a <a href="SC://String"><span class="s2">String</span></a> which serves as a human readable description of this spec.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>setupFunc</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Returns this spec's <b>setupFunc</b> (see above).</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>cleanupFunc</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Returns this spec's <b>cleanupFunc</b> (see above).</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>defaultAttributes</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Returns this spec's <b>defaultAttributes</b> (see above).</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>ugenGraphFunc</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Returns this spec's <b>ugenGraphFunc</b> (see above).</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>presets_</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>presets</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Set or get this spec's <b>presets</b> dictionary.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>name</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Returns this spec's name as a <a href="SC://Symbol"><span class="s2">Symbol</span></a>.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>specsDict</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Returns this spec's <b>specsDict</b> (see above). Plugins may customize specDicts in their <b>setupFunc</b>, so when working with a plugin, use its <b>specsDict</b> getter method rather than this one.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>guiFunc</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Returns this spec's <b>guiFunc</b> (see above) if one has been provided, or the default GUI function otherwise.</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p12"><b>Examples</b></p>
<p class="p3"><br></p>
<p class="p14">////// some plugin spec examples (see the *initClass method for more)</p>
<p class="p3"><br></p>
<p class="p14">// a simple highpass filter</p>
<p class="p4">(</p>
<p class="p15"><span class="s4">BMPluginSpec</span><span class="s5">(</span>'Help-Highpass'<span class="s5">, <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s10">// name</span></p>
<p class="p14"><span class="s5"><span class="Apple-tab-span">	</span>{</span><span class="s4">|plugin, input, freq|</span><span class="s5"> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// ugenGraphFunc, freq becomes a Control</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">HPF</span>.ar(input, freq);</p>
<p class="p4"><span class="Apple-tab-span">	</span>},<span class="Apple-converted-space"> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span></p>
<p class="p4"><span class="Apple-tab-span">	</span>(freq: <span class="s9">\freq</span>.asSpec),<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s10">// specsDict</span></p>
<p class="p14"><span class="s5"><span class="Apple-tab-span">	</span></span><span class="s4">nil</span><span class="s5">, <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// use the default GUI</p>
<p class="p4"><span class="Apple-tab-span">	</span>(atcs: (freq: 80), tweeters: (freq: 10000)), <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s10">// presets for use with some speakers</span></p>
<p class="p16"><span class="s5"><span class="Apple-tab-span">	</span></span>"2nd Order Butterworth Highpass Filter -12db/Oct"<span class="s5"><span class="Apple-tab-span">	</span></span><span class="s10">// description</span></p>
<p class="p4">);</p>
<p class="p4">)</p>
<p class="p3"><br></p>
<p class="p15"><span class="s5">p = </span><span class="s4">BMPlugin</span><span class="s5">(</span>'Help-Highpass'<span class="s5">);</span></p>
<p class="p4">x = {<span class="s4">Out</span>.ar(1, <span class="s4">PinkNoise</span>.ar(0.2))}.play;</p>
<p class="p4">p.makeSynth(1, x, <span class="s9">\addAfter</span>);</p>
<p class="p14"><span class="s5">p.gui; </span>// default GUI looks like this</p>
<p class="p4">x.free; p.release;</p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p14">// a plugin with setup and cleanup functions, and defaultAttributes<span class="Apple-converted-space"> </span></p>
<p class="p14">// (could actually do this simpler, but ...)</p>
<p class="p4">(</p>
<p class="p15"><span class="s4">BMPluginSpec</span><span class="s5">(</span>'Help-Buffer-Delay'<span class="s5">, <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s10">// name</span></p>
<p class="p17"><span class="s5"><span class="Apple-tab-span">	</span>{</span>|plugin, input, delayTime|<span class="s5"> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s10">// ugenGraphFunc</span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">var</span> buffer;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>buffer = plugin.attributes.buffer;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s10">// get the buffer from the attributes</span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">BufDelayC</span>.ar(buffer, input, delayTime) + input;</p>
<p class="p4"><span class="Apple-tab-span">	</span>},</p>
<p class="p4"><span class="Apple-tab-span">	</span>(delayTime: <span class="s4">ControlSpec</span>(0.0001, 1, <span class="s9">\linear</span>, 0, 0.5, units: <span class="s11">" secs"</span>)), <span class="Apple-tab-span">	</span><span class="s10">// specsDict</span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s4">nil</span>, <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s10">// default GUI</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>(oneSecond: (delayTime: 1)),<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s10">// presets</span></p>
<p class="p16"><span class="s5"><span class="Apple-tab-span">	</span></span>"Automatically added Delay with Cubic Interpolation; 1 second maximum"<span class="s5">,<span class="Apple-tab-span">	</span></span><span class="s10">// description</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>(maximumDelay: 2),</p>
<p class="p3"><span class="Apple-tab-span">	</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>{<span class="s4">|plugin|</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s10">// setupFunc</span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">var</span> attr, server;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>attr = plugin.attributes;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>server = plugin.server;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>attr.buffer = <span class="s4">Buffer</span>.alloc(plugin.server, attr.maximumDelay * server.sampleRate, 1);</p>
<p class="p4"><span class="Apple-tab-span">	</span>},</p>
<p class="p14"><span class="s5"><span class="Apple-tab-span">	</span>{</span><span class="s4">|plugin|</span><span class="s5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// cleanupFunc</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>plugin.attributes.buffer.free;</p>
<p class="p4"><span class="Apple-tab-span">	</span>}</p>
<p class="p4">);</p>
<p class="p4">)</p>
<p class="p3"><br></p>
<p class="p15"><span class="s5">p = </span><span class="s4">BMPlugin</span><span class="s5">(</span>'Help-Buffer-Delay'<span class="s5">);</span></p>
<p class="p4">x = {<span class="s4">Out</span>.ar(1, <span class="s4">Decay2</span>.ar(<span class="s4">Impulse</span>.ar(0.5), 0.001, 0.01, <span class="s4">PinkNoise</span>.ar(0.2)))}.play;</p>
<p class="p4">p.makeSynth(1, x, <span class="s9">\addAfter</span>);</p>
<p class="p14"><span class="s5">p.gui; </span>// default GUI looks like this</p>
<p class="p4">x.free; p.release;</p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p14">// GUI Functions</p>
<p class="p14">// in principle GUI functions of arbitrary complexity are possible</p>
<p class="p14">// the default GUI Function is outlined below, and can serve as an example of how to go about this</p>
<p class="p17"><span class="s5">{</span>|plugin|</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="s4">var</span> numSliders, spec, window, presetMenu, sliders;</p>
<p class="p4"><span class="Apple-tab-span">	</span>spec = plugin.spec;</p>
<p class="p4"><span class="Apple-tab-span">	</span>numSliders = spec.specsDict.size;</p>
<p class="p4"><span class="Apple-tab-span">	</span>window = <span class="s4">SCWindow</span>.new(<span class="s11">"Plugin:"</span> + spec.name,<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">Rect</span>(300, 300, 552, (numSliders + 1) * 24 + 24), <span class="s4">false</span>); <span class="s10">// 508</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>window.view.decorator = <span class="s4">FlowLayout</span>(window.view.bounds);</p>
<p class="p4"><span class="Apple-tab-span">	</span>window.view.background = <span class="s4">Color</span>.rand.alpha_(0.3);</p>
<p class="p4"><span class="Apple-tab-span">	</span>sliders = ();</p>
<p class="p4"><span class="Apple-tab-span">	</span>spec.specsDict.sortedKeysValuesDo({<span class="s4">|key, cspec|</span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">var</span> initVal;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>initVal = plugin.get(key);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(cspec.units == <span class="s11">" dB"</span> &amp;&amp; plugin.attributes[<span class="s9">\usesLinearAmp</span>]).if({<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>initVal = initVal.ampdb;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>sliders[key] = <span class="s4">EZSlider</span>.new(window, 500@20, key.asString, cspec,</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{<span class="s4">|ez|</span> <span class="s4">var</span> setVal;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>setVal = ez.value;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(cspec.units == <span class="s11">" dB"</span> &amp;&amp; plugin.attributes[<span class="s9">\usesLinearAmp</span>]).if({<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>setVal = setVal.dbamp;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>plugin.set(key, setVal);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}, initVal, labelWidth: 70</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>sliders[key].numberView.background = <span class="s4">Color</span>.white.alpha_(0.4);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">SCStaticText</span>(window, <span class="s4">Rect</span>(0,0,40,20)).string_(cspec.units);</p>
<p class="p3"><span class="Apple-tab-span">	</span></p>
<p class="p4"><span class="Apple-tab-span">	</span>});</p>
<p class="p4"><span class="Apple-tab-span">	</span>window.view.decorator.nextLine.shift(10, 10);</p>
<p class="p4"><span class="Apple-tab-span">	</span>presetMenu = <span class="s4">SCPopUpMenu</span>(window, <span class="s4">Rect</span>(0, 0, 100, 20));</p>
<p class="p4"><span class="Apple-tab-span">	</span>presetMenu.items = [<span class="s11">"presets"</span>, <span class="s11">"-"</span>] ++ spec.presets.keys;</p>
<p class="p4"><span class="Apple-tab-span">	</span>presetMenu.action = {</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if(presetMenu.value &gt; 1, {</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>plugin.preset_(presetMenu.items[presetMenu.value].asSymbol);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>sliders.keysValuesDo({<span class="s4">|key, slid|</span><span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">var</span> newVal;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>newVal = plugin.get(key);</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(slid.controlSpec.units == <span class="s11">" dB"</span><span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>&amp;&amp; plugin.attributes[<span class="s9">\usesLinearAmp</span>]).if({<span class="Apple-converted-space"> </span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>newVal = newVal.ampdb;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>slid.value = newVal;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p4"><span class="Apple-tab-span">	</span>};</p>
<p class="p14"><span class="s5"><span class="Apple-tab-span">	</span>window.front; </span>// this return value is stored in the plugin's gui var</p>
<p class="p4">}</p>
</body>
</html>
